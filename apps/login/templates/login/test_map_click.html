<!DOCTYPE html>
<html>
  <head>
    <title>Arvin's Test Map</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 400px;
        width: 800px;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      function initMap() {

        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 47.612, lng: -122.3073},
          zoom: 9,
          styles: [
          {elementType: 'geometry', stylers: [{color: '#ebe3cd'}]},
              {elementType: 'labels.text.fill', stylers: [{color: '#523735'}]},
              {elementType: 'labels.text.stroke', stylers: [{color: '#f5f1e6'}]},
              {
                featureType: 'administrative',
                elementType: 'geometry.stroke',
                stylers: [{color: '#c9b2a6'}]
              },
              {
                featureType: 'administrative.land_parcel',
                elementType: 'geometry.stroke',
                stylers: [{color: '#dcd2be'}]
              },
              {
                featureType: 'administrative.land_parcel',
                elementType: 'labels.text.fill',
                stylers: [{color: '#ae9e90'}]
              },
              {
                featureType: 'landscape.natural',
                elementType: 'geometry',
                stylers: [{color: '#dfd2ae'}]
              },
              {
                featureType: 'poi',
                elementType: 'geometry',
                stylers: [{color: '#dfd2ae'}]
              },
              {
                featureType: 'poi',
                elementType: 'labels.text.fill',
                stylers: [{color: '#93817c'}]
              },
              {
                featureType: 'poi.park',
                elementType: 'geometry.fill',
                stylers: [{color: '#a5b076'}]
              },
              {
                featureType: 'poi.park',
                elementType: 'labels.text.fill',
                stylers: [{color: '#447530'}]
              },
              {
                featureType: 'road',
                elementType: 'geometry',
                stylers: [{color: '#f5f1e6'}]
              },
              {
                featureType: 'road.arterial',
                elementType: 'geometry',
                stylers: [{color: '#fdfcf8'}]
              },
              {
                featureType: 'road.highway',
                elementType: 'geometry',
                stylers: [{color: '#f8c967'}]
              },
              {
                featureType: 'road.highway',
                elementType: 'geometry.stroke',
                stylers: [{color: '#e9bc62'}]
              },
              {
                featureType: 'road.highway.controlled_access',
                elementType: 'geometry',
                stylers: [{color: '#e98d58'}]
              },
              {
                featureType: 'road.highway.controlled_access',
                elementType: 'geometry.stroke',
                stylers: [{color: '#db8555'}]
              },
              {
                featureType: 'road.local',
                elementType: 'labels.text.fill',
                stylers: [{color: '#806b63'}]
              },
              {
                featureType: 'transit.line',
                elementType: 'geometry',
                stylers: [{color: '#dfd2ae'}]
              },
              {
                featureType: 'transit.line',
                elementType: 'labels.text.fill',
                stylers: [{color: '#8f7d77'}]
              },
              {
                featureType: 'transit.line',
                elementType: 'labels.text.stroke',
                stylers: [{color: '#ebe3cd'}]
              },
              {
                featureType: 'transit.station',
                elementType: 'geometry',
                stylers: [{color: '#dfd2ae'}]
              },
              {
                featureType: 'water',
                elementType: 'geometry.fill',
                stylers: [{color: '#b9d3c2'}]
              },
              {
                featureType: 'water',
                elementType: 'labels.text.fill',
                stylers: [{color: '#92998d'}]
              },
          // {
          //   "featureType": "all",
          //   "stylers": [
          //     { "color": "#C0C0C0" }
          //   ]
          // },{
          //   "featureType": "road.arterial",
          //   "elementType": "geometry",
          //   "stylers": [
          //     { "color": "#CCFFFF" }
          //   ]
          // },
          {
            "featureType": "poi",
            "elementType": "labels",
            "stylers": [
              { "visibility": "off" }
            ]
          },
          {
            "featureType": "transit",
            "elementType": "labels",
            "stylers": [
              { "visibility": "off" }
            ]
          },
          {
            "featureType": "landscape.man_made",
            "elementType": "labels",
            "stylers": [
              { "visibility": "off" }
            ]
          },
          // {
          //   "featureType": "poi.camping",
          //   "elementType": "labels",
          //   "stylers": [
          //     { "visibility": "on" }
          //   ]
          // },

        ]
        });

      // var marker = new google.maps.Marker({
      //   position:{lat:47.324833,lng:-122.404238},
      //   map:map,
      //   icon:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png'
      // }); //Put a marker in Federal Way


      var infoWindow = new google.maps.InfoWindow({
        content:'<a href="/campfriends/add_info"><h1 placeholder="your_name_of_place">name of place</h1></a>'
      }); //Put a pop up window in Federal Way

      // marker.addListener('click', function(){
      //   infoWindow.open(map, marker);
      // }); //Allows you to click on the marker to reveal the Pop Up window

      // google.maps.event.addListener(map, 'click',
      // function(event){
      //   addMarker()
      // }); //

      function addMarker(coords){
        var marker = new google.maps.Marker({
          position:coords,
          map:map,
        });
        marker.addListener('click', function(){
          infoWindow.open(map, marker);
      }); // Don't know why this doesn't add an info window BUT it adds a new red marker anywhere in the Map
      };

      // addMarker({lat:47.577700,lng:-122.385895});
      // // adds a marker in West Seattle

      // var infoWindow = new google.maps.InfoWindow({
      //   content:'<a href="http://www.crateandbarrel.com"><h1>West seattle</h1></a>'
      // }); // Changed the pop up window in Federal Way to read West Seattle

      google.maps.event.addListener(map, "click", function (event) {
        var latitude = event.latLng.lat();
        var longitude = event.latLng.lng();
        console.log("lat:"+latitude+",lng:"+longitude);
        console.log (latitude);
        console.log (longitude);
        addMarker({lat:latitude,lng:longitude});
        
     


        // $.ajax({
        //         url: "/addLocation",
        //         type: "POST",
        //         dataType: "json",
        //         data: {
        //             testing: "whoa",
        //             longitude: longitude,
        //             csrfmiddlewaretoken: '{{ csrf_token }}'
        //             },
        //         success : function(json) {
        //             alert("Successfully sent the URL to Django");
        //         },
        //         error : function(xhr,errmsg,err) {
        //             alert("Could not send URL to Django. Error: " + xhr.status + ": " + xhr.responseText);
        //         }
        //     });

      });

      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMH_lNHWESdK6odItdiJDuhGSbREOh31A&callback=initMap"
    async defer></script>
  </body>
</html>